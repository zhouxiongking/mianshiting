function a(){var a=window.location.search.split("=")[1];a&&parseInt(a)>0&&$.ajax({url:"/article-json/loadPreAndNext",data:{articleId:a},dataType:"json",success:function(a){t(a.preArticle,a.nextArticle)}})}function t(a,t){var e=$("#pre"),s=$("#next");a&&a.id?(e.text(a.title),e.attr("href","/articles/?articleId="+a.id)):(e.text("没有了"),e.attr("href","javascript:;")),t&&t.id?(s.text(t.title),s.attr("href","/articles/?articleId="+t.id)):(s.text("没有了"),s.attr("href","javascript:;"))}function e(){var a=window.location.search.split("=")[1];a&&parseInt(a)>0&&$.ajax({url:"/article-json/loadArticleDetail",data:{articleId:a},dataType:"json",success:function(a){s(a.article,a.reading)}})}function s(a){var t=$(".con-article");t.empty(),t.append(a.content);var e=[];e.push('<video id="video" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="none" width="738" height="400"'),e.push('data-setup="{}">'),e.push('<source src="/html5_blue/video/test.mp4" type="video/mp4"/>'),e.push('<track kind="captions" src="" srclang="en" label="English"></track>'),e.push('<track kind="subtitles" src="" srclang="en" label="English"></track>'),e.push("</video>");var s=$(e.join("")),i=$(".article-box .article-content p img:eq(0)"),n=$(i).parent().prev(),l=$(i).parent(),c=l.next();n.after(s),l.remove(),c.remove()}function i(){$(window).scroll(function(){$(this).scrollTop()>=200?($(".side-btns-wrap").addClass("show"),$(".side-btns-wrap").removeClass("hide")):($(".side-btns-wrap").addClass("hide"),$(".side-btns-wrap").removeClass("show"))})}function n(){$(".side-btns-top-btn").click(function(){$("html, body").animate({scrollTop:0},500)})}function l(){$("#search-btn").click(function(){var a=$("#search-input").val();a&&a.trim().length&&($(".loading").show(),c(a,1,"search"))})}function c(a,t,e){$.ajax({url:"/article-json/loadArticlesByKeyword",data:{keyword:a,pageNo:t},dataType:"json",success:function(a){w(a.articleList,t),_(a.articleList,e)}})}function r(){$(".toggle-search").click(function(){$("i",this).toggleClass("fa-search fa-remove"),$(".site-search").toggleClass("opacity-0 opacity-1")})}function o(){$.ajax({url:"/article-json/loadHotLabels",dataType:"json",success:function(a){u(a.labelList)}})}function u(a){for(var t=$(".hot-label"),e=[],s=0;s<a.length;s++)e.push('<li><a href="/html?category='+a[s].name+'">'+a[s].name+"（"+a[s].counts+"）</a></li>");t.append($(e.join("")))}function h(){$.ajax({url:"/article-json/loadRecentArticles",dataType:"json",success:function(a){d(a.recentArticleList,"recent")}})}function p(){$.ajax({url:"/article-json/loadHotArticles",dataType:"json",success:function(a){d(a.hotArticleList,"hot")}})}function d(a,t){var e;e="hot"==t?$(".hot-articles"):$(".recommend-articles");for(var s=[],i=0;i<a.length;i++)s.push('<li><div class="sideshow">'),s.push('<a href="/articles/?articleId='+a[i].id+'" target="_ablank" title="'+a[i].title+'">'),s.push('<img width="80" height="60" src="'+a[i].url+'" class="icon wp-post-image" alt="'+a[i].title+'" title="'+a[i].title+'"></a>'),s.push('<a href="/articles/?articleId='+a[i].id+'" target="_ablank" title="'+a[i].title+'">'+a[i].title+"</a> "),s.push('<span class="datetime">'+a[i].uploadtime+"</span>"),s.push("</div></li>");e.append(s.join(""))}function m(){$(".shield_down_div").click(function(){$(".video-play").hide(),$(".shield_down_div").hide()})}function f(){$("#slide1_s0, .play").click(function(){$(".shield_down_div").show(),$(".video-play").show()})}function g(){$("#get-more").click(function(){v()})}function v(){var a=$("#search-input").val();if(a&&a.trim().length){var t=$("#currentPageNo").val();c(a,s=parseInt(t)+1,"more")}else{var e=window.location.pathname,s=(t=$("#currentPageNo").val(),parseInt(t)+1);$(".loading").show(),e.indexOf("html")>=0?b(s,"more"):x(s,"more")}}function y(){var a=window.location.pathname;$(".loading").show(),a.indexOf("html")>=0?b(1,"classify"):x(1)}function b(a,t){var e=window.location.search.split("=")[1];$.ajax({url:"/article-json/loadArticleByCategory",data:{pageNo:a,category:e},dataType:"json",success:function(s){w(s.articleList,a),_(s.articleList,t),k(e)}})}function w(a,t){$(".loading").hide(),a&&a.length&&$("#currentPageNo").val(t)}$(function(){e(),a()}),$(function(){p(),h(),o(),r(),l(),i(),n()}),$(function(){y(),g(),f(),m()});var j={basic:["基础教学",""],advance:["进阶教学",""],framework:["框架教学",""],tool:["工具教学",""],Javascript:["基础教学","Javascript"],HTML5:["基础教学","HTML5"],CSS3:["基础教学","CSS3"],ES6:["进阶教学","ES6"],Vue:["框架教学","Vue全家桶"],Git:["工具教学","Git教学"],Webpack:["工具教学","webpack教学"]};function k(a){var t=$("#current-first"),e=$("#current-second");switch(t.text(j[a][0]),e.text(j[a][1]),a){case"basic":case"advance":case"framework":case"tool":t.attr("href","/html/?category="+a);break;case"Javascript":case"HTML5":case"CSS3":t.attr("href","/html/?category=basic"),e.attr("href","/html/?category="+a);break;case"ES6":t.attr("href","/html/?category=advance"),e.attr("href","/html/?category="+a);break;case"Vue":t.attr("href","/html/?category=framework"),e.attr("href","/html/?category="+a);break;case"Git":case"Webpack":t.attr("href","/html/?category=tool"),e.attr("href","/html/?category="+a)}}function x(a,t){$.ajax({url:"/article-json/loadArticleByPage",data:{pageNo:a},dataType:"json",success:function(e){w(e.articleList,a),_(e.articleList,t)}})}function _(a,t){var e=$(".articles"),s=[];a&&a.length?$(".no-more").hide():("search"==t||"classify"==t?$(".no-more").text("抱歉，没找到相关文章~~~~(>_<)~~~~"):$(".no-more").text("没有更多了..."),$(".no-more").show(),$("#get-more").hide());for(var i=0;i<a.length;i++)s.push('<div class="block">'),s.push('<h2><span class="category">'),s.push('<a href="/html?category='+a[i].category+'" rel="category tag">'+a[i].category+"</a>"),s.push('<i class="fa fa-caret-right"></i></span>'),s.push('<a href="/articles?articleId='+a[i].id+'" target="_ablank">'+a[i].title+"</a></h2>"),s.push('<div class="clear"></div>'),a[i].url&&(s.push('<div class="viewimg">'),s.push('<a href="/articles?articleId='+a[i].id+'" target="_ablank" class="ipic" title='+a[i].title+">"),s.push("<img src="+a[i].url+" alt="+a[i].title+' class="thumbnail">'),s.push('<span class="shine" style="background-position: 160px 50%;">&nbsp;</span>'),s.push("</a></div>")),s.push('<div class="preview">'+a[i].description+"</div>"),s.push('<div class="preem">'),s.push('<span><i class="fa fa-clock-o"></i>'+a[i].uploadtime+"</span>"),s.push('<span><i class="fa fa-user"></i><a href="#">'+a[i].username+"</a></span>"),s.push('<span><i class="fa fa-comment-o"></i>'),s.push('<a href="#" class="ds-thread-count" data-thread-key="156">21</a></span>'),s.push('<span><i class="fa fa-eye"></i>'+a[i].clicks+"</span>"),s.push("<span></span>"),s.push('<span class="more">'),s.push('<a href="/articles?articleId='+a[i].id+'" title="这个没有略缩图，不会显示前面的图片！">阅读详情</a>'),s.push("</span></div></div>");"more"!==t&&e.empty(),e.append($(s.join("")))}function C(a,t){$(".loading").show(),$("#ul-message-list").empty(),$.ajax({url:"/message-json/loadMsgByPage",type:"post",data:{pageNo:a,type:t},dataType:"json",success:function(e){var s;$(".loading").hide(),T(e.msgList,a),"init"==t&&$("#totalCount").text(e.totalCount),s=e.totalCount?e.totalCount%20?parseInt(e.totalCount/20)+1:parseInt(e.totalCount/20):1,"init"==t&&S(s)}})}function T(a,t){for(var e=$("#ul-message-list"),s=[],i=20*(t-1)+1,n=0;n<a.length;n++)s.push('<li><div class="pic"><img src="/html5_blue/images/anonymity.png" width="50px"/></div>'),s.push('<div class="msg-content"><span>匿名</span>'),s.push("<span>"+a[n].leaveTime+"</span>"),s.push('<span class="level">第'+(i+n)+"楼</span>"),s.push('<p class="msg">'+a[n].content+"</p>"),s.push("</div></li>");e.append(s.join(""))}function S(a){$(".pager").pagination({pageCount:a,coping:!0,mode:"fixed",homePage:"首页",endPage:"末页",prevContent:"上页",nextContent:"下页",callback:function(a){C(a.getCurrent(),"page")}})}function L(){$("#content").keyup(function(){var a=$("#content").val(),t=$("#count");t.text(a.length),a.length>100?t.css("color","red"):t.css("color","#666")})}function I(){$("#btn").click(function(){var a=$("#content").val();$(".warning");return!(!a||!a.trim().length)&&(a.trim().length>100?(E("请输入100字以内的内容"),!1):void A(a))})}function A(a){var t=$("#btn");t.attr("disabled",!0),$.ajax({url:"/message-json/saveMessage",type:"post",data:{content:a},dataType:"json",success:function(){E("感谢你的留言~"),$("#content").val(""),$("#count").text(0),setTimeout(function(){C(1,"init")},500),t.removeAttr("disabled")}})}function E(a){var t=$(".warning");t.text(a),t.animate({opacity:1},1e3),setTimeout(function(){t.animate({opacity:0},1e3)},2e3)}function H(){var a=window.location.search,t=window.location.pathname,e=a.split("=")[1],s=$(".navbar-collapse"),i=[];i.push("<ul>"),"/"==t?i.push('<li class="menu-item current_page_item"><a href="/">首页</a></li>'):i.push('<li class="menu-item"><a href="/">首页</a></li>'),["basic","Javascript","CSS3","HTML5"].join().indexOf(e)>=0?i.push('<li class="menu-item current_page_item"><a href="/html/?category=basic">基础教学</a>'):i.push('<li class="menu-item "><a href="/html/?category=basic">基础教学</a>'),i.push('<ul class="sub-menu">'),i.push('<li class="sub-menu-item"><a href="/html/?category=Javascript">Javascript</a></li>'),i.push('<li class="sub-menu-item"><a href="/html/?category=CSS3">CSS3</a></li>'),i.push('<li class="sub-menu-item"><a href="/html/?category=HTML5">HTML5</a></li>'),i.push("</ul></li>"),["advance","ES6"].join().indexOf(e)>=0?i.push('<li class="menu-item current_page_item"><a href="/html/?category=advance">进阶教学</a>'):i.push('<li class="menu-item "><a href="/html/?category=advance">进阶教学</a>'),i.push('<ul class="sub-menu">'),i.push('<li class="sub-menu-item"><a href="/html/?category=ES6">ES6</a></li>'),i.push("</ul></li>"),["framework","Vue"].join().indexOf(e)>=0?i.push('<li class="menu-item current_page_item"><a href="/html/?category=framework">框架教学</a>'):i.push('<li class="menu-item "><a href="/html/?category=framework">框架教学</a>'),i.push('<ul class="sub-menu">'),i.push('<li class="sub-menu-item"><a href="/html/?category=Vue">Vue全家桶</a></li>'),i.push("</ul></li>"),["tool","Git","Webpack"].join().indexOf(e)>=0?i.push('<li class="menu-item current_page_item"><a href="/html/?category=tool">工具教学</a>'):i.push('<li class="menu-item "><a href="/html/?category=tool">工具教学</a>'),i.push('<ul class="sub-menu">'),i.push('<li class="sub-menu-item"><a href="/html/?category=Git">Git教学</a></li>'),i.push('<li class="sub-menu-item"><a href="/html/?category=Webpack">Webpack教学</a></li>'),i.push("</ul></li>"),t.indexOf("liuyan")>=0?i.push('<li class="menu-item current_page_item"><a href="/liuyan/">给我留言</a>'):i.push('<li class="menu-item "><a href="/liuyan/">给我留言</a>'),i.push('<ul class="sub-menu"></ul></li>'),t.indexOf("fm")>=0?i.push('<li class="menu-item current_page_item"><a href="/fm/">关于博主</a>'):i.push('<li class="menu-item "><a href="/fm/">关于博主</a>'),i.push('<ul class="sub-menu"></ul></li>'),i.push("</ul>"),s.append($(i.join("")))}$(function(){I(),L(),C(1,"init")}),$(function(){H()});